- user ||= f.object
- with_submit ||= false
- with_label ||= false
- fclass = ""
- fclass << " required" unless user.password_set?

%fieldset{data: {role: 'password'}}
  %p.password_quality.floating{data: {role: "meter"}}
    %span.instructions{data: {role: "warnings"}}
    %span.meter{data: {role: "gauge"}}
      %svg.ok
        %use{"xlink:href" => "#bare_tick_symbol"}
      %svg.notok
        %use{"xlink:href" => "#bare_cross_symbol"}

  %p.manage_password
    %span.col.password>
      - if with_label
        = f.label :password, class: "required"
      = f.password_field :password, placeholder: t("placeholders.user.password"), required: !user.password_set?, data: {role: "password"}
    %span.col.confirmation{:data => {:role => "confirmation"}}>
      - if with_label
        %br
      = f.password_field :password_confirmation, placeholder: "", required: true

  - if with_submit
    %p.buttons{:data => {:role => "confirmation"}}>
      = f.submit "Set password"

  %p.guidance
    As you type your password its strength will be evaluated and suggestions given.
    You are not required to choose a complicated password but it is highly recommended for your own protection: obvious passwords can be cracked in a few seconds.
    You can add numbers and punctuation to increase complexity, but spaces are also allowed so the easy way is just to type more words.
