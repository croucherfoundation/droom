= form_for [@folder, @document], :html => { :multipart => true, :class => 'edit document', :remote => true, :data => {:type => :html}} do |f|
  = hidden_field_tag :authenticity_token, form_authenticity_token
  = hidden_field_tag :document_id, @document.id
  
  %p.error{style: 'color: red'}
  
  - if ['google_doc', 'notion_page'].include?(@view)
    - if @view == 'google_doc'
      %p.name
        = f.label :name, t("helpers.label.document.gogole_doc_name")
        %br
        = f.text_field :name, required: true, class: "name", placeholder: t("helpers.label.document.gogole_doc_name"), autofocus: true, data: {role: 'name'}
      %p.name
        = f.label :google_doc_link, t("helpers.label.document.gogole_doc_link")
        %br
        = f.text_field :google_doc_link, required: true, class: "name", placeholder: t("helpers.label.document.gogole_doc_link"), data: {role: 'name'}
    - else
      %p.name
        = f.label :name, t("helpers.label.document.notion_page_name")
        %br
        = f.text_field :name, required: true, class: "name", placeholder: t("helpers.label.document.notion_page_name"), autofocus: true, data: {role: 'name'}
      %p.name
        = f.label :notion_page_link, t("helpers.label.document.notion_page_link")
        %br
        = f.text_field :notion_page_link, required: true, class: "name", placeholder: t("helpers.label.document.notion_page_link"), data: {role: 'name'}
    .buttons
      = f.submit 'Save'
      = t :or
      = link_to t(:cancel), "/", :class => 'cancel'

  - else
    %p.slug
      = @folder.path + "/"

    .filepicker{:data => {:role => "filepicker"}}
      = link_to "choose file", "#", :class => "ul minimal #{@document.file_extension}", :data => {:action => "pick"}
      = f.file_field :file, :class => "file"
      %p.tip
        = t :click_to_choose_file

    .non-file-data
      %p#document-info.name
      - if name = @document.name
        - arr = name.split('.')
        - extension = arr.last
        - name = arr.reverse.drop(1).reverse.join('.')
        = f.hidden_field :name, :class => 'name'
        = text_field_tag :filename, name, class: 'filename', :placeholder => t(:"helpers.label.document.name"), :autofocus => true, style: "width: 75%"
        = text_field_tag :extension, ".#{extension}", class: 'extension', readonly: true, style: "width: 20%; background: #eee"
      %p.description
        = f.text_area :description, :class => 'description', :placeholder => t(:"helpers.label.document.description")

      .buttons
        = f.submit t(:save_document)
        = t :or
        = link_to t(:cancel), "/", :class => 'cancel'
