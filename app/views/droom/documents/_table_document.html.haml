- document ||= table_document

%tr.document.holder
  %th.name
    = link_to truncate(document.name, :length => 24), document_url(document), :class => "#{document.file_extension} #{' changed' if document.changed_since_creation? }document", :title => t(:click_to_download, :name => document.file_file_name)
  %td.filename.minor
    %span.note
      = truncate(document.file_file_name, :length => 18)
  %td.filesize.minor
    %span.note
      = number_to_human_size(document.file_file_size)
  %td.created.minor
    %span.note
      = l document.created_at.to_date, :format => :minimal_with_year
  %td.event.minor
    - if document.latest_event_id
      = link_to truncate(document.latest_event_name, :length => 18), event_url(Droom::Event.find(document.latest_event_id)), :class => "event note"
  %td.agenda_section.minor
    %span.note
      = truncate(document.category_name, :length => 18, :separator => " ")
  - if current_user.admin?
    %td.admin<
      = link_to t(:edit), edit_document_url(document), :class => 'edit minimal', :remote => true, :data => {:action => "overlay_form", :type => "html"}
      = link_to t(:remove), document_url(document), :method => 'delete', :class => 'delete minimal', :remote => 'true', :data => {:confirm => t(:confirm_delete_document, :name => document.name)}
%tr
  %td.description{:colspan => 6}
    %p
      = document.description